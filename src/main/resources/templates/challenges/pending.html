<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layouts/base}">
<head>
    <th:block layout:fragment="style">
        <th:block th:replace="fragments/bundles/css :: datatables"></th:block>
    </th:block>
</head>
<body>
<h4 layout:fragment="page-title">Dashboard</h4>
<section layout:fragment="content">
    <div class="col-lg-8 col-md-6 col-sm-12">
        <div class="card-box table-responsive">

            <div class="dropdown pull-right">
                <a href="#" class="dropdown-toggle card-drop" data-toggle="dropdown" aria-expanded="false">
                    <i class="zmdi zmdi-more-vert"></i>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li class="divider"></li>
                    <li><a href="#">Separated link</a></li>
                </ul>
            </div>

            <h4 class="header-title m-t-0 m-b-30">Responsive example</h4>

            <table id="datatable-users" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Email</th>
                    <th>Name</th>
                    <th>Level</th>
                    <th>Health</th>
                    <th>Gold</th>
                    <th>Fighting</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <th:block th:each="user,iterStat : ${users}">
                    <tr>
                        <td th:text="${iterStat.count}">#</td>
                        <td th:text="${user.getEmail()}">Email</td>
                        <td th:text="${user.getName()}">Name</td>
                        <td th:text="${user.getLevel()}">Level</td>
                        <td th:text="${user.getHealth()}">Health</td>
                        <td th:text="${user.getGold()}">Gold</td>
                        <td th:text="${user.getChallengesAccepted().size()}">Fighting</td>
                        <td>
                            <button th:attr="usr-id=${user.getId()}" type="button" class="btn btn-success btn-xs btn-rounded w-md waves-effect waves-light m-b-5 challenge-approve">
                                Approve Challenge
                                <i class="fa fa-check"></i>
                            </button>
                            <button th:attr="usr-id=${user.getId()}" type="button" class="btn btn-danger btn-xs btn-rounded w-md waves-effect waves-light m-b-5 challenge-decline">
                                Decline Challenge
                                <i class="fa fa-times"></i>
                            </button>
                        </td>
                    </tr>
                </th:block>
                </tbody>
            </table>
        </div>
    </div><!-- end col -->
    <div class="col-lg-4 col-md-6 col-sm-12">
        <div class="card-box">
            <div class="dropdown pull-right">
                <a href="#" class="dropdown-toggle card-drop" data-toggle="dropdown" aria-expanded="false">
                    <i class="zmdi zmdi-more-vert"></i>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li class="divider"></li>
                    <li><a href="#">Separated link</a></li>
                </ul>
            </div>

            <h4 class="header-title m-t-0 m-b-30">Currently Fighting</h4>

            <div class="widget-box-2">
                <div class="widget-detail-2">
                    <span id="challengerrs-health-percentage" class="badge badge-pink pull-left m-t-20"></span>
                    <h2 id="challengers-count" class="m-b-0"> </h2>
                    <h4 id="challengers-health" class="m-b-0 m-t-0"> </h4>
                    <p id="challengers-max-health" class="m-b-0"> </p>
                </div>
                <div class="progress progress-bar-pink-alt progress-sm m-b-0">
                    <div id="challengers-data-bar" class="progress-bar progress-bar-pink" role="progressbar"
                         aria-valuemin="0" aria-valuemax="100" >
                        <span class="sr-only"></span>
                    </div>
                </div>
            </div>
        </div>
    </div><!-- end col -->
</section>
<th:block layout:fragment="script">
    <th:block th:replace="fragments/bundles/javascript :: datatables"></th:block>
    <script>
        $('#datatable-users').DataTable();
    </script>
    <script th:src="@{~/assets/pages/jquery.challenge.js}"></script>
</th:block>
</body>
</html>
